<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shared Portfolio View â€“ Executive Dashboard</title>
  <style>

  /* Force Project Charters to occupy a full row so the Updates section starts below */
  .project-charters-section, .project-charters-section .toolbar, .project-charters-section .tiles { grid-column: 1 / -1; width:100%; }
  .flow-break{ grid-column:1 / -1; width:100%; height:0; }



/* === Static Charter Tiles (scoped) === */
.tiles{display:grid; grid-template-columns:repeat(5, minmax(0,1fr)); gap:12px; margin:6px 0 18px}
@media (max-width: 1000px){ .tiles{grid-template-columns:repeat(3, minmax(0,1fr))} }
@media (max-width: 650px){ .tiles{grid-template-columns:repeat(2, minmax(0,1fr))} }
.tile{display:flex; align-items:center; justify-content:center; min-height:44px; padding:12px 14px;
  border:1px solid rgba(255,255,255,.12); background:var(--card, #121a29); border-radius:14px;
  text-decoration:none; color:var(--ink, #e8ecf1); font-weight:700; box-shadow:var(--shadow, 0 6px 24px rgba(0,0,0,.25))}
.tile:hover{border-color:rgba(106,163,255,.55); background:linear-gradient(180deg,rgba(106,163,255,.10),rgba(255,255,255,.00))}
[contenteditable="true"]{outline:1px dashed transparent; transition:outline-color .15s ease, background .15s ease}
[contenteditable="true"]:focus{outline-color: rgba(106,163,255,.55); background: rgba(106,163,255,.08)}


  /* === PMO Executive Portfolio View === */
  :root{
    --ink:#e8ecf1;
    --muted:#a9b2bd;
    --panel:#0f1420;
    --card:#121a29;
    --accent:#6aa3ff;
    --shadow:0 6px 24px rgba(0,0,0,.25);
  }
  html, body{height:100%}
  body{margin:0; background:radial-gradient(1200px 800px at 10% -10%, #0b0d12 0%, #0f1320 100%); color:var(--ink); font:16px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";}
  .shell{max-width:1100px; margin:40px auto; padding:24px}
  header{position:sticky; top:0; z-index:3; background:rgba(15,19,32,.86); backdrop-filter:saturate(140%) blur(8px); border-bottom:1px solid rgba(255,255,255,.06);}
  header .inner{max-width:1100px; margin:0 auto; padding:14px 24px; display:flex; align-items:center; gap:16px}
  header h1{margin:0; font-size:28px; letter-spacing:.2px}
  .pill{display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border:1px solid rgba(255,255,255,.12); background:#0d1421; border-radius:999px; color:var(--muted); font-size:13px}
  .pmo{margin:24px 0; padding:20px; border-radius:16px; background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.06); box-shadow:var(--shadow);}
  .pmo h2{margin:0 0 6px 0}
  .exec{display:grid; gap:10px; margin-bottom:16px}
  .exec .badges{display:flex; gap:8px; flex-wrap:wrap}
  .badge{display:inline-flex; align-items:center; gap:8px; padding:10px 12px; border-radius:12px; background:var(--card); border:1px solid rgba(255,255,255,.06); font-size:12px; color:var(--muted)}
  .dot{width:10px; height:10px; border-radius:50%}
  .dot.g{background:#28c76f}
  .dot.y{background:#ffcc00}
  .dot.r{background:#ff4d4f}
  .toolbar{display:flex; align-items:center; gap:10px; margin:10px 0}
  .toolbar .spacer{flex:1}

  /* Tiles */
  .tiles{display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:12px; margin:6px 0 18px}
  .tile{display:flex; gap:12px; align-items:center; padding:12px 14px; border:1px solid rgba(255,255,255,.06);
    background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.00)); border-radius:14px; text-decoration:none; color:var(--ink);
    transition:transform .16s ease, border-color .16s ease, background .16s ease; box-shadow:var(--shadow)}
  .tile:hover{transform:translateY(-2px); border-color:rgba(106,163,255,.55); background:linear-gradient(180deg,rgba(106,163,255,.10),rgba(255,255,255,.00))}
  .avatar{width:36px; height:36px; border-radius:50%; display:grid; place-items:center; font-weight:800;
    background:radial-gradient(60% 100% at 50% 0%, rgba(255,255,255,.18), rgba(255,255,255,.04)), var(--card);
    border:1px solid rgba(255,255,255,.08); flex:0 0 36px}
  .meta-wrap{min-width:0}
  .name{font-weight:700; line-height:1.2; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .link{font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis}

  /* Standardized entries */
  .list{display:grid; gap:12px}
  .card{background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:16px; padding:16px; box-shadow:var(--shadow)}
  .card .row{display:grid; grid-template-columns:1fr 320px; gap:12px}
  @media (max-width: 980px){ .card .row{grid-template-columns:1fr} }
  .kv{display:grid; grid-template-columns:160px 1fr; gap:6px}
  .kv b{color:var(--muted); font-weight:600}
  .health{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,.1); background:#0d1421}
  .health .dot{width:8px; height:8px}
  
  /* --- Tile layout controls --- */
  .btn{cursor:pointer; font-weight:600; padding:8px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:var(--card); color:var(--ink);}
  .btn:hover{border-color:rgba(106,163,255,.55)}
  .seg{display:inline-flex; gap:8px}
  .tiles.tiles--row{display:flex; overflow-x:auto; gap:12px; padding-bottom:4px}
  .tiles.tiles--row .tile{flex:0 0 300px; white-space:normal}
  .tiles.tiles--even{display:grid; grid-template-columns:repeat(5, 1fr)}
  @media (max-width: 1200px){ .tiles.tiles--even{grid-template-columns:repeat(3, 1fr)} }
  @media (max-width: 800px){ .tiles.tiles--even{grid-template-columns:repeat(2, 1fr)} }
  @media (max-width: 520px){ .tiles.tiles--even{grid-template-columns:repeat(1, 1fr)} }

  
  /* --- Compact single-line tiles --- */
  .tiles{display:grid; grid-template-columns:repeat(5, minmax(0,1fr)); gap:8px; margin:6px 0 18px}
  @media (max-width: 900px){ .tiles{grid-template-columns:repeat(3, minmax(0,1fr))} }
  @media (max-width: 620px){ .tiles{grid-template-columns:repeat(2, minmax(0,1fr))} }
  .tile{display:flex; align-items:center; justify-content:center; padding:10px 12px; border:1px solid rgba(255,255,255,.12);
    background:var(--card); border-radius:12px; text-decoration:none; color:var(--ink); font-weight:600; min-height:44px}
  .tile:hover{transform:none; border-color:rgba(106,163,255,.55); background:linear-gradient(180deg,rgba(106,163,255,.10),rgba(255,255,255,.00))}
  .name{font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-size:14px}
  .link{display:none} /* hide URL line */
  .avatar{display:none} /* remove initials bubble */

  /* --- Collapsible updates --- */
  details.update{background:var(--card); border:1px solid rgba(255,255,255,.06); border-radius:16px; box-shadow:var(--shadow); overflow:hidden}
  details.update + details.update{margin-top:12px}
  details.update summary{list-style:none; cursor:pointer; padding:14px 16px; display:flex; align-items:center; gap:10px; user-select:none}
  details.update summary::-webkit-details-marker{display:none}
  .summary-row{display:flex; align-items:center; gap:10px; width:100%}
  .summary-row .spacer{flex:1}
  .summary-meta{display:flex; gap:12px; color:var(--muted); font-size:12px}
  .update-body{padding:0 16px 16px}
  .update-body .row{display:grid; grid-template-columns:1fr; gap:8px}
  .update-body p{margin:0}
  .form{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:10px 0 16px}
  @media (max-width: 800px){ .form{grid-template-columns:1fr} }
  .field{display:grid; gap:6px}
  .field label{display:block; font-size:12px; color:var(--muted)}
  input[type="text"], input[type="date"], textarea, select{
    width:100%; padding:10px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12);
    background:var(--card); color:var(--ink); outline:none;
  }
  textarea{min-height:72px; resize:vertical}
  .actions{display:flex; gap:10px; justify-content:flex-end}
  .btn{cursor:pointer; font-weight:600; padding:8px 12px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:var(--card); color:var(--ink);}
  .btn.primary{background:#0b3df2; border-color:#0b3df2}
  .btn.primary:hover{filter:brightness(1.1)}

  
  /* === Spacing fixes for Team Status Updates form === */
  .form{grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; margin:8px 0 12px; align-items:start}
  @media (max-width: 900px){ .form{grid-template-columns:1fr} }
  .field{display:flex; flex-direction:column; gap:6px; margin:0}
  .field label{margin:0 0 4px 0; font-size:12px; color:var(--muted)}
  input[type="text"], input[type="date"], textarea, select{
    padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.12);
    background:var(--card); color:var(--ink); outline:none; margin:0
  }
  select{height:44px}
  textarea{min-height:64px}
  .actions{margin-top:2px}

  
  /* === Update form layout & spacing === */
  .form{
    display:grid;
    grid-template-columns:1fr 1fr;
    grid-template-areas:
      "date health"
      "summary highlights"
      "risks next"
      "actions actions";
    gap:12px;
    margin:10px 0 16px;
    align-items:start;
  }
  @media (max-width: 900px){
    .form{grid-template-columns:1fr; grid-template-areas:
      "date" "health" "summary" "highlights" "risks" "next" "actions";}
  }
  .field{display:flex; flex-direction:column; gap:6px; margin:0}
  .field--date{grid-area:date}
  .field--health{grid-area:health}
  .field--summary{grid-area:summary}
  .field--highlights{grid-area:highlights}
  .field--risks{grid-area:risks}
  .field--next{grid-area:next}
  .field--actions{grid-area:actions; display:flex; justify-content:flex-end}
  .field label{margin:0 0 4px 0; font-size:12px; color:var(--muted)}
  input[type="text"], input[type="date"], textarea, select{
    width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.12);
    background:var(--card); color:var(--ink); outline:none; margin:0
  }
  select{height:44px}
  textarea#updSummary{min-height:96px}
  textarea{min-height:64px; resize:vertical}

  
  /* === Input overflow fix === */
  *, *::before, *::after { box-sizing: border-box; }
  .form{gap:12px}
  .form .field{min-width:0}
  .form .field input,
  .form .field select,
  .form .field textarea{
    width:100%;
    max-width:100%;
    display:block;
    box-sizing:border-box;
    overflow:auto;
  }

  
  .btn.ghost{background:transparent; border-color:rgba(255,255,255,.18); color:var(--ink)}
  .btn.ghost:hover{border-color:rgba(106,163,255,.55)}
  .btn.small{padding:6px 10px; font-size:12px; border-radius:10px}
  .controls{display:flex; gap:8px}

  </style>
</head>
<body>
  <header>
    <div class="inner">
      <h1>Team Jackal Program Status</h1>
      <span class="pill">Unified, executive-ready summary of the team's project portfolios.</span>
    </div>
  </header>

  <div class="shell">
    <section class="pmo" id="portfolio-view" aria-label="Executive Portfolio View">
      <div class="exec">
        <section class="project-charters-section">
<div class="toolbar">
          <h2>Portfolio View</h2>
          <div class="spacer"></div>
        </div>
        <p>The program currently spans 5 projects, with 4 on track, 1 at risk, and 0 off track. Common themes include charter finalization, scope alignment, and early milestone planning.</p>
        <div class="badges">
          <div class="badge"><span class="dot g"></span> <span id="ctGreen">4</span> On Track</div>
          <div class="badge"><span class="dot y"></span> <span id="ctYellow">1</span> At Risk</div>
          <div class="badge"><span class="dot r"></span> <span id="ctRed">0</span> Off Track</div>
          <div class="badge">Total: <b id="ctTotal">5</b> projects</div>
        </div>
      </div></section>
<section class="pmo">
      <div class="toolbar">
        <h3>Project Charters</h3>
        <div class="spacer"></div>

      <div class="tiles" aria-label="Project charter tiles">
        <a class="tile" href="https://adiaz341.github.io/Project-Charter/" target="_blank" rel="noopener noreferrer">Alejandro Diaz</a>
        <a class="tile" href="https://ryanhwang2.github.io/Week-7-Homework-2-Charter-Iteration/" target="_blank" rel="noopener noreferrer">Ryan Hwang</a>
        <a class="tile" href="https://winterguy123.github.io/jyan.github.io/" target="_blank" rel="noopener noreferrer">Jeremy Yan</a>
        <a class="tile" href="https://juanstudentaccount.github.io/Updated-Project-Charter/" target="_blank" rel="noopener noreferrer">Juan Talome</a>
        <a class="tile" href="https://alexis-s-pinon.github.io/4860-project-charter/" target="_blank" rel="noopener noreferrer">Alexis Pinon</a>
      </div>

</section>
<section class="pmo">
<div class="flow-break"></div>
<div class="toolbar">
        <h3>Team Status Updates</h3>
        <div class="spacer"></div>
      </div>
      
      <div class="form" id="updateForm">
        <div class="field field--date"><label>Date</label><input type="date" id="updDate"></div>
        <div class="field field--health"><label>Health</label>
          <select id="updHealth">
            <option value="green">On Track</option>
            <option value="yellow">At Risk</option>
            <option value="red">Off Track</option>
          </select>
        </div>
        <div class="field field--summary"><label>Summary (2â€“3 sentences)</label><textarea id="updSummary" placeholder="Concise update in a consistent, professional tone"></textarea></div>
        <div class="field field--highlights"><label>Highlights (comma-separated)</label><textarea id="updHighlights" placeholder="Key wins, progress"></textarea></div>
        <div class="field field--risks"><label>Challenges / Risks (comma-separated)</label><textarea id="updRisks" placeholder="Issues, dependencies"></textarea></div>
        <div class="field field--next"><label>Next Week Focus (comma-separated)</label><textarea id="updNext" placeholder="Immediate priorities"></textarea></div>
        <div class="actions field--actions"><button class="btn primary" id="addUpdateBtn">Add Update</button></div>
      </div>
      <div class="toolbar"><h3>Recent Updates</h3><div class="spacer"></div><div class="controls"><button class="btn ghost small" id="expandAllBtn">Expand All</button><button class="btn ghost small" id="collapseAllBtn">Collapse All</button></div></div>
      <div class="list" id="updatesList" aria-label="Recent team updates"></div>

    </section>
  </div>

  <script>
  // --- Data (edit to update the dashboard) ---
  const PMO_PROJECTS = [
    { name: "Project Charter â€“ adiaz341", owner: "A. Diaz", health: "green",
      summary: "Scope defined and initial charter published. Team is aligning on milestones and responsibilities.",
      risk: "None material at this stage; awaiting feedback alignment.",
      next: "Confirm success metrics and finalize schedule." },
    { name: "Charter Iteration â€“ ryanhwang2", owner: "R. Hwang", health: "green",
      summary: "Iteration incorporates early feedback and clarifies deliverables. Dependencies captured.",
      risk: "Minor: timeline sensitivity around resource availability.",
      next: "Lock resourcing and publish baseline plan." },
    { name: "jyan Charter â€“ winterguy123", owner: "J. Yan", health: "yellow",
      summary: "Key requirements identified; validation in progress. Several open questions remain with stakeholders.",
      risk: "Open requirements may affect scope and schedule if not resolved promptly.",
      next: "Complete stakeholder review and resolve open questions." },
    { name: "Updated Charter â€“ juanstudentaccount", owner: "Juan S.", health: "green",
      summary: "Updated version clarifies scope and success criteria. Schedule and deliverables drafted.",
      risk: "None significant; monitoring integration dependencies.",
      next: "Kick off sprint-0 tasks and confirm integration points." },
    { name: "4860 Project Charter â€“ alexis-s-pinon", owner: "A. Pinon", health: "green",
      summary: "Draft finalized with initial stakeholder review. Budget assumptions to be validated.",
      risk: "Budget and vendor timeline risks if assumptions change.",
      next: "Validate budget, align vendor timeline, and set go/no-go gate." }
  ];

  // Team weekly status updates (edit to add new entries)
  let TEAM_UPDATES = [{
      date: "2025-10-26",
      owner: "PMO",
      health: "green",
      highlights: [
        "All charters published in shared view; baseline scope and success metrics drafted.",
        "Initial milestone plan agreed by most teams."
      ],
      risks: [
        "Two projects awaiting stakeholder sign-off may slip if feedback delays continue."
      ],
      next: [
        "Lock baselines, confirm resourcing, and launch sprint-0 ceremonies."
      ]
    }
  ];


  // --- Helpers ---
  const $ = (s, r=document) => r.querySelector(s);
  function el(tag, cls, txt){ const n=document.createElement(tag); if(cls) n.className=cls; if(txt!==undefined) n.textContent=txt; return n; }
  function cap(s){ return s.replace(/\b\w/g,m=>m.toUpperCase()); }
  function initials(name){ const parts=name.split(/[\sâ€“-]+/).filter(Boolean); const a=(parts[0]||'X')[0]; const b=(parts[1]?.[0]||(parts[0]?.[1]||'')).toUpperCase(); return (a+b).toUpperCase(); }

  // --- Tiles ---
  );
  }

  // --- Standardized Entry Cards ---
  function healthChip(h){
    const chip=el('span','health');
    const dot=el('span','dot ' + (h==='green'?'g':h==='yellow'?'y':'r'));
    chip.appendChild(dot);
    chip.appendChild(el('span','', h==='green'?'On Track':(h==='yellow'?'At Risk':'Off Track')));
    return chip;
  }

  function renderUpdates(){
    const list=document.getElementById('updatesList'); if(!list) return; list.innerHTML='';
    const items=[...TEAM_UPDATES].sort((a,b)=> (b.date||'').localeCompare(a.date||''));
    items.forEach((u,idx)=>{
      const det=document.createElement('details'); det.className='update'; if(idx===0) det.setAttribute('open','open');
      // keep pointer to original array index for stable edit/delete
      const origIndex = TEAM_UPDATES.indexOf(u);
      det.dataset.idx = String(origIndex);

      const sum=document.createElement('summary');
      const row=el('div','summary-row');
      row.appendChild(el('strong','', `Update â€“ ${u.date}`));
      row.appendChild(el('span','spacer'));
      const meta=el('div','summary-meta'); meta.appendChild(el('span','', u.owner||'')); meta.appendChild(healthChip(u.health||'green'));
      row.appendChild(meta);
      sum.appendChild(row); det.appendChild(sum);

      const body=el('div','update-body');
      body.appendChild(el('p','', 'Summary: ' + (u.summary || '-')));
      body.appendChild(el('p','', 'Highlights: ' + (u.highlights?.join(' â€¢ ')||'-')));
      body.appendChild(el('p','', 'Challenges / Risks: ' + (u.risks?.join(' â€¢ ')||'-')));
      body.appendChild(el('p','', 'Next Week Focus: ' + (u.next?.join(' â€¢ ')||'-')));

      const actions=el('div','actions');
      const editBtn=el('button','btn small','Edit'); editBtn.type='button'; editBtn.addEventListener('click', (e)=>{ e.preventDefault(); startEdit(origIndex); });
      const delBtn=el('button','btn ghost small','Delete'); delBtn.type='button'; delBtn.addEventListener('click', (e)=>{ e.preventDefault(); deleteUpdate(origIndex); });
      actions.appendChild(editBtn); actions.appendChild(delBtn);
      body.appendChild(actions);

      det.appendChild(body);
      list.appendChild(det);
    });
  }


  // --- Executive Summary ---
  function renderSummary(){ /* disabled: manual portfolio view */ } projects, with ${greens} on track, ${yellows} at risk, and ${reds} off track.`,
      `Common themes include charter finalization, scope alignment, and early milestone planning.`,
      (yellows>0 || reds>0) ? `Primary risks center on schedule clarity and stakeholder alignment; mitigation actions are in progress.` : `No material risks are trending across the portfolio at this time.`,
      `Near-term focus is on locking baseline plans, confirming success metrics, and initiating sprint-0 deliverables.`
    ];
    $("#execSummary").textContent = exec.join(' ');
  }

  function setTilesLayout(mode){
    const root=document.getElementById('tiles'); if(!root) return;
    root.classList.remove('tiles--row','tiles--even');
    if(mode==='row'){ root.classList.add('tiles--row'); }
    if(mode==='even'){ root.classList.add('tiles--even'); }
  }

  function wireLayoutButtons(){
    const rowBtn=document.getElementById('tilesRowBtn');
    const evenBtn=document.getElementById('tilesEvenBtn');
    if(rowBtn) rowBtn.addEventListener('click', ()=> setTilesLayout('row'));
    if(evenBtn) evenBtn.addEventListener('click', ()=> setTilesLayout('even'));
  }

  function renderPMO(){
    renderSummary();
    renderUpdates();
    wireLayoutButtons();
    // default to evenly split grid on load
    setTilesLayout('even');
  }
  
  // ----- Persistence for updates -----
  const STORAGE_KEY = "pmo_team_updates_v1";
  function loadUpdates(){
    try{
      const raw=localStorage.getItem(STORAGE_KEY);
      if(!raw) return;
      const arr=JSON.parse(raw);
      if(Array.isArray(arr)) TEAM_UPDATES = arr;
    }catch(e){}
  }
  function saveUpdates(){
    try{ localStorage.setItem(STORAGE_KEY, JSON.stringify(TEAM_UPDATES)); }catch(e){}
  }
  function addUpdateFromForm(){
    const d=document.getElementById('updDate').value || new Date().toISOString().slice(0,10);
    const h=document.getElementById('updHealth').value || 'green';
    const s=(document.getElementById('updSummary').value||'').trim();
    const hl=(document.getElementById('updHighlights').value||'').split(',').map(s=>s.trim()).filter(Boolean);
    const rk=(document.getElementById('updRisks').value||'').split(',').map(s=>s.trim()).filter(Boolean);
    const nx=(document.getElementById('updNext').value||'').split(',').map(s=>s.trim()).filter(Boolean);
    const payload = {date:d, owner:'PMO', summary:s, health:h, highlights:hl, risks:rk, next:nx};

    if(EDIT_INDEX!==null){
      TEAM_UPDATES[EDIT_INDEX] = payload;
    } else {
      TEAM_UPDATES.push(payload);
    }
    saveUpdates();
    renderUpdates();
    // reset editing state & clear inputs (keep date/health)
    EDIT_INDEX = null;
    const btn = document.getElementById('addUpdateBtn'); if(btn){ btn.textContent='Add Update'; }
    ['updSummary','updHighlights','updRisks','updNext'].forEach(id=>{ const el=document.getElementById(id); if(el) el.value=''; });
  }

  
  // ----- Expand/Collapse All -----
  function expandAllUpdates(){ document.querySelectorAll('details.update').forEach(d=>d.setAttribute('open','open')); }
  function collapseAllUpdates(){ document.querySelectorAll('details.update').forEach(d=>d.removeAttribute('open')); }

  // ----- Edit/Delete -----
  let EDIT_INDEX = null;
  function startEdit(idx){
    const u = TEAM_UPDATES[idx]; if(!u) return;
    document.getElementById('updDate').value = u.date || '';
    document.getElementById('updHealth').value = u.health || 'green';
    document.getElementById('updSummary').value = u.summary || '';
    document.getElementById('updHighlights').value = (u.highlights||[]).join(', ');
    document.getElementById('updRisks').value = (u.risks||[]).join(', ');
    document.getElementById('updNext').value = (u.next||[]).join(', ');
    const btn = document.getElementById('addUpdateBtn');
    if(btn){ btn.textContent = 'Save Update'; }
    EDIT_INDEX = idx;
    // scroll into view
    document.getElementById('updateForm').scrollIntoView({behavior:'smooth', block:'start'});
  }

  function deleteUpdate(idx){
    if(idx==null || idx<0 || idx>=TEAM_UPDATES.length) return;
    TEAM_UPDATES.splice(idx,1);
    saveUpdates();
    renderUpdates();
  }

  document.addEventListener('DOMContentLoaded', ()=>{
    loadUpdates();
    renderPMO();
    const addBtn=document.getElementById('addUpdateBtn');
    if(addBtn){ addBtn.addEventListener('click', (e)=>{ e.preventDefault(); addUpdateFromForm(); }); }
    const ex=document.getElementById('expandAllBtn'); if(ex){ ex.addEventListener('click', (e)=>{ e.preventDefault(); expandAllUpdates(); }); }
    const cl=document.getElementById('collapseAllBtn'); if(cl){ cl.addEventListener('click', (e)=>{ e.preventDefault(); collapseAllUpdates(); }); }
  });

  </script>
</body>
</html>
